!function(){var e={31788:function(e,t){t.config={type:"production",cdn:{enabled:{forAssets:!1,forApi:!1},assets:"assetscdn-",api:"apicdn-",domain:{production:"wchat.freshchat.com",staging:"webchat-msgreen.freshpori.com",local:"localhost:8580"},subDomain:"",protocol:{local:"http://",production:"https://",staging:"https://"}}}}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,n),a.exports}!function(){"use strict";var e={SAMPLE_TOKEN:"WEB_CHAT_TOKEN",frameDivId:"fc_frame",frameId:"fc_widget",pushFrameDivId:"fc_push_frame",pushFrameId:"fc_push",modalDivId:"fc_web_modal",classes:{fullscreenClass:"fc-widget-fullscreen"},AJAX_URL:{canary:"/app/services/app/webchat/{token}/canary"},canaryRoutes:{feature:"canary",rts:"rtscanary"}};var t=function(){!function(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,undefined);var e=!1,t=!1,n=!1,i=!1,o=[],a={};return{isLoaded:function(){return e},loaded:function(t){e=t},isInitialized:function(){return t},initialized:function(e){t=e},isOpened:function(){return n},opened:function(e){n=e},doOpen:function(){return i},openOnLoad:function(e){i=e},getTags:function(){return o},setTags:function(e){o=e},getFaqTags:function(){return a},setFaqTags:function(e){a=e},reset:function(){e=!1,t=!1,n=!1,i=!1,o=[],a={}}}}.bind(void 0)();function i(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")}var o,a,s,r,d,c,u,l,f,g=function(){i(this,undefined);var e=null,t=null,n=null,o=null,a=null,s=!1,r=null,d={},c={},u={},l=["firstName","lastName","email","phone","phoneCountry","locale"];return{getIntegrations:function(){return d},getcampaignRuleIds:function(){return r},setcampaignRuleIds:function(e){r=e},setIntegrations:function(e){d=e},getFlowId:function(){return n},setFlowId:function(e){n=e},getFlowVersionId:function(){return o},setFlowVersionId:function(e){o=e},getPreviewMode:function(){return a},setPreviewMode:function(e){a=e},getExternalId:function(){return e},setExternalId:function(t){e=t},getRestoreId:function(){return t},setRestoreId:function(e){t=e},setIdentifyByReferenceId:function(e){s=e},getIdentifyByReferenceId:function(){return s},getConfig:function(){return c},setConfig:function(e){c=e},getProperties:function(){return u},setProperties:function(e){var t=this;e&&(l.forEach(function(n){i(this,t),e[n]&&(u[n]=e[n])}.bind(this)),e.meta&&this.setUserMeta(e.meta))},setFirstName:function(e){u.firstName=e},setLastName:function(e){u.lastName=e},setEmail:function(e){u.email=e},setPhone:function(e){u.phone=e},setPhoneCountry:function(e){u.phoneCountry=e},setUserMeta:function(e){if(u.meta=u.meta||{},e)for(var t in e)e.hasOwnProperty(t)&&(u.meta[t]=e[t])},setLocale:function(e){u.locale=e},reset:function(){e=null,t=null,c={},u={}},getJSON:function(){return{externalId:e,restoreId:t,customConfig:c,properties:u}}}}.bind(void 0)(),h=n(31788),p={url_domain:function(e){var t=document.createElement("a");return t.href=e,t.origin},getElementStyle:function(e,t){return window.getComputedStyle(e)[t]},setAttr:function(e,t){for(var n in t)t.hasOwnProperty(n)&&e.setAttribute(n,t[n]);return e},remove:function(e){var t=document,n=t.body,i=t.getElementById(e);i&&(this.purge(i),n.removeChild(i))},purge:function(e){var t,n,i,o=e.attributes;if(o)for(t=o.length-1;t>=0;t-=1)"function"==typeof e[i=o[t].name]&&(e[i]=null);if(o=e.childNodes)for(n=o.length,t=0;t<n;t+=1)this.purge(e.childNodes[t])},cdn_url:function(){if(h&&h.config){var e=h.config.type,t=h.config.cdn;return t.protocol[e]+(t.enabled.forAssets?t.assets:"")+t.domain[e]}},bindEvent:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];window.addEventListener?window.addEventListener(e,t,n):window.attachEvent(e,t,n)},unbindEvent:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];window.removeEventListener?window.removeEventListener(e,t,n):window.detachEvent(e,t,n)},parseJSON:function(e){var t;if(e){try{t=JSON.parse(e)}catch(e){}return t}},stringifyJSON:function(e){var t=null;if(e){try{var n=window.ItilUtil&&window.ItilUtil.jsonStringifyWrapper;t=n&&"function"==typeof n&&n(e)||JSON.stringify(e)}catch(e){}return t}},storageAvailable:function(e){var t;try{var n="__storage_test__";return(t=window.localStorage).setItem(n,n),t.removeItem(n),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&0!==t.length}}(),isPushSupportedByBrowser:function(){var e,t,n,i,o,a,s,r,d=!1,c=!1;i=window.chrome,o=window.navigator,a=o.vendor,s=o.userAgent.indexOf("OPR")>-1,r=o.userAgent.indexOf("Edge")>-1,null!=i&&"Google Inc."===a&&!1===s&&!1===r&&(e=!!(n=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./))&&parseInt(n[2],10))&&(d=e>=50),navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&(t=function(){var e=navigator.userAgent,t=e.indexOf("Firefox"),n=e.substring(t+8).split(".");return!(!n||!n.length)&&parseInt(n[0],10)}(),t&&(c=t>=44));var u="serviceWorker"in navigator,l=function(){var e=!1;try{ServiceWorkerRegistration&&"showNotification"in ServiceWorkerRegistration.prototype&&(e=!0)}catch(e){}return e}(),f="PushManager"in window;return u&&l&&f&&(d||c)},getAgent:(d=navigator.appVersion,c=navigator.userAgent,u=navigator.appName,l=""+parseFloat(d),f=parseInt(d,10),-1!==c.indexOf("Station")&&(r="Station"),-1!==(a=c.indexOf("Opera"))?(u="Opera",l=c.substring(a+6),-1!==(a=c.indexOf("Version"))&&(l=c.substring(a+8))):-1!==(a=c.indexOf("MSIE"))?(u="Microsoft Internet Explorer",l=c.substring(a+5)):-1!==(a=c.indexOf("Edge"))?(u="Edge",l=c.substring(a+5)):-1!==(a=c.indexOf("Trident"))?(u="Trident",l=c.substring(a+8)):-1!==(a=c.indexOf("Chrome"))?(u="Chrome",l=c.substring(a+7)):-1!==(a=c.indexOf("Safari"))?(u="Safari",l=c.substring(a+7),-1!==(a=c.indexOf("Version"))&&(l=c.substring(a+8))):-1!==(a=c.indexOf("Firefox"))?(u="Firefox",l=c.substring(a+8)):-1===(a=c.indexOf("Mobile"))||-1===c.indexOf("iPad")&&-1===c.indexOf("iPhone")&&-1===c.indexOf("iPod")&&-1===c.indexOf("wv")?(o=c.lastIndexOf(" ")+1)<(a=c.lastIndexOf("/"))&&(u=c.substring(o,a),l=c.substring(a+1),u.toLowerCase()===u.toUpperCase()&&(u=navigator.appName)):(u="WebView",l=c.substring(a+8)),-1!==(s=l.indexOf(";"))&&(l=l.substring(0,s)),-1!==(s=l.indexOf(" "))&&(l=l.substring(0,s)),f=parseInt(""+l,10),isNaN(f)&&(l=""+parseFloat(d),f=parseInt(d,10)),{name:u,appName:r,version:f,versionx:l,os:navigator.platform}),isSafariBrowser:function(){return!(!this.getAgent||"Safari"!==this.getAgent.name)}};function m(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")}var w=function(){m(this,undefined);var t=null,n=null,i=null,o=null,a=null,s=null,r=!1,d=!1,c=null,u=!1,l=null,f=null,h=null,w=null,v=null,b=["get_user_uuid"];return{getHost:function(){return a},getToken:function(){return n},getReferrer:function(){return i},getSiteId:function(){return o},getSettings:function(){return s},setSettings:function(e){r=!!((s=e).userAuthConfig&&s.userAuthConfig.jwtAuthEnabled&&s.userAuthConfig.strictModeEnabled),d=!(!s.userAuthConfig||!s.userAuthConfig.jwtAuthEnabled)},isJWTStrictMode:function(){return r},isJWTEnabled:function(){return d},getJWTAuthToken:function(){return c},setJWTAuthToken:function(e){c=e},isLoaded:function(){return u},loaded:function(e){u=e},loadingActions:function(){return b},init:function(e){n=e.token,i=e.referrer,a=e.host,o=e.siteId,r=!1,d=!1,c=e.jwtAuthToken,u=!1,l=e.flowId,f=e.flowVersionId,h=e.previewMode,w=e.cspNonce,v=e.omniCookie},reset:function(){n=i=a=o=r=d=c=u=l=f=h=v=void 0},getJSON:function(){return{token:n,flowId:l,flowVersionId:f,previewMode:h,referrer:i,host:a,siteId:o,jwtStrictMode:r,jwtEnabled:d,jwtAuthToken:c,loaded:u,omniCookie:v}},load:function(e,n,i){if(p.isSafariBrowser()&&w){var o=document.createElement("script");o.nonce=w,o.textContent='window.location = "'.concat(e,'"'),t=i.contentWindow,i.contentDocument.body.appendChild(o)}else t=window.open(e,n)},postMessage:function(e){t&&t.postMessage(e,a)},dispatch:function(e,t){e&&t&&"function"==typeof e&&e(t)},unload:function(){this.postMessage({action:"push_subscribe_destroy"})},add:function(){var t=document,n=t.body,i=t.getElementById(e.frameDivId),o=t.createElement("IFRAME"),a=g.getConfig(),s=a&&a.cssNames;i&&"DIV"===i.tagName||(i=t.createElement("DIV"),n.appendChild(i)),p.setAttr(i,{id:e.frameDivId,class:s&&s.widget||""}),i.classList.add("fc_dn"),a&&a.headerProperty?("ltr"===a.headerProperty.direction&&i.classList.add("fc_l2r"),a.headerProperty.hideChatButton||i.classList.remove("fc_dn")):i.classList.remove("fc_dn"),p.setAttr(o,{id:e.frameId,name:e.frameId,title:"Chat",frameborder:"0",allowFullScreen:"true",webkitallowfullscreen:"true",mozallowfullscreen:"true"}),i.appendChild(o);var r=a&&a.widgetCanary?e.canaryRoutes.feature:"";this.loadCanaryWidget(r,o)},loadRTSCanaryWidget:function(t){var i=this,o=new XMLHttpRequest,s=e.AJAX_URL.canary.replace("{token}",n);s=a+s,o.open("GET",s,!0),o.onreadystatechange=function(){if(m(this,i),4===o.readyState){var n=p.parseJSON(o.response),a=n&&n.canary_enabled?e.canaryRoutes.rts:"";this.loadCanaryWidget(a,t)}}.bind(this),o.send()},loadCanaryWidget:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1?arguments[1]:void 0;!h||"botflow"!==h&&"autofaq"!==h?this.load("".concat(a,"/widget/").concat(t,"?token=").concat(n,"&referrer=").concat(i),e.frameId,o):this.load("".concat(a,"/widget/").concat(t,"?token=").concat(n,"&referrer=").concat(i,"&previewMode=").concat(h),e.frameId,o)},remove:function(e){p.remove(e),t=null},setFrameSize:function(){var t=this.getSettings(),n=g.getConfig();if(null===t)return"";var i=t.widgetSize,o=!(!n||!n.fullscreen)&&n.fullscreen,a="fc-widget-normal",s=document.getElementById(e.frameDivId);!0===o&&s.classList.add(e.classes.fullscreenClass),i&&i.length>0&&(a="fc-widget-"+i.toLowerCase()),s.classList.add(a)},setWidgetDisplayStyle:function(){var t=document.body,n=document.getElementById(e.frameDivId),i=p.getElementStyle(t,"display");i&&-1!==["flex"].indexOf(i)&&p.setAttr(n,{style:"display: ".concat(i)})}}}.bind(void 0)();var v=function(){!function(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,undefined);var e=[],t=!1;return{enque:function(n){t||(void 0===e&&(e=[]),e.push(n))},deque:function(){if(e&&e.length)return e.shift()},toggleLock:function(e){t=e},isLocked:function(){return t},isEmpty:function(){return!e||!e.length}}}.bind(void 0)();var b=function(){!function(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,undefined);var e={};return{subscribe:function(n,i,o){t.isLoaded()||w.isLoaded()&&-1!==w.loadingActions().indexOf("get_user_uuid")?(e[n+"_ack"]=o,w.postMessage({action:n,payload:i})):v.enque({action:n,payload:i,handler:o})},publish:function(t,n){w.dispatch(e[t],{success:n.success,status:n.status,data:n.data})}}}.bind(void 0)(),y=function(e,t){return new Promise((function(n,i){b.subscribe(e,t,(function(e){var t=e&&e.status,o=e&&e.success;200===t||o?n(e):i(e)}))}))},_=function(e,t,n){t&&"function"==typeof t&&(n=t,t=null),b.subscribe(e,t,n)},I=function(e){return!(!e||"function"!=typeof e)};var E=function(){!function(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,undefined);var e={},t=["widget:opened","widget:closed","widget:loaded","dialog:opened","dialog:closed","widget:destroyed","frame:statechange","user:statechange","user:created","user:cleared","user:authenticated","message:sent","message:received","unreadCount:notify","push:subscribed","readReceipts:update","csat:received","csat:updated","csat:show","anchorLink:clicked","faq:clicked","download:file","rts:connected","rts:disconnected"];return{clear:function(){e={}},valid:function(e){return!(!e||!t)&&-1!==t.indexOf(e)},subscribe:function(t,n){this.valid(t)&&(void 0===e[t]&&(e[t]=[]),e[t].push(n))},unsubscribe:function(t,n){if(this.valid(t)){var i,o=e&&e[t];if(o)for(var a=0,s=o.length;a<s;a++)if(i=o[a],I(i)&&(!n||i.name===n.name)){e[t].splice(a,1);break}}},publish:function(t,n,i){if(this.valid(t)){var o=e&&e[t];if(o)for(var a=function(e){return function(){n?e(n):e()}},s=0,r=o.length;s<r;s++){var d=a(o[s]);i?setTimeout(d,0):d()}if("function"==typeof window.CustomEvent){var c=new CustomEvent("fwcrm_event_consume",{detail:{name:t,origin:window.origin,args:n}});window.dispatchEvent(c)}}}}}.bind(void 0)();var C=function(){!function(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,undefined);var t=null,n=null,i=null,o=!1,a=null,s=null,r=null;return{isLoaded:function(){return o},loaded:function(e){o=e},getSource:function(){return r},setSource:function(e){r=e},getHost:function(){return t},getHostOrigin:function(){return n},getLogoPath:function(){return i},init:function(e){t=e.host,n=e.hostOrigin,i=e.appLogoPath,a=e.locale,s=e.sales360App,this.load()},reset:function(){t=null,n=null,i=null,a=null,s=null,o=!1,r=null},postMessage:function(e){e.openWindow?window.open(t+"&action="+btoa(e.action)+"&appLogoPath="+btoa(i)+"&locale="+btoa(a)+"&sales360App="+btoa(s),"_blank","toolbar=yes,scrollbars=yes,resizable=yes,top=500,left=500,width=400,height=400"):o&&this.post({action:e.action,payload:e.payload})},post:function(e){r.postMessage(e,n)},add:function(){var n=document,i=n.body,o=n.getElementById(e.pushFrameDivId),a=n.createElement("IFRAME");o&&"DIV"===o.tagName||(o=n.createElement("DIV"),i.appendChild(o)),o.setAttribute("id",e.pushFrameDivId),p.setAttr(a,{id:e.pushFrameId,src:t,title:"Chat",frameborder:"0"}),o.appendChild(a)},load:function(){p.isPushSupportedByBrowser()&&this.add()},unload:function(){p.remove(e.pushFrameDivId),this.reset()}}}.bind(void 0)();var k=function(){!function(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,undefined);var t=function(e){27===e.keyCode&&this.destroy()};return{create:function(n){var i=document,o=i.body,a=i.createElement("DIV"),s=i.createElement("IMG"),r=i.createElement("DIV"),d=i.createElement("DIV");a.setAttribute("id",e.modalDivId),a.onclick=this.destroy,s.setAttribute("src",n),s.onclick=this.destory,d.appendChild(s),d.className="image-cell",r.appendChild(d),r.className="image-wrapper",a.appendChild(r),o.appendChild(a),window.addEventListener?window.addEventListener("keydown",t.bind(this),!1):window.attachEvent("keydown",t.bind(this),!1)},destroy:function(){var n=document,i=n.body,o=n.getElementById(e.modalDivId);o&&(p.purge(o),i.removeChild(o)),window.removeEventListener?window.removeEventListener("keydown",t.bind(this)):window.detachEvent("keydown",t.bind(this))}}}.bind(void 0)();var L=function(){!function(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,undefined);var e={},t="_fc_observer";return{attach:function(n,i,o){var a="".concat(i).concat(t);n[i]&&o&&(void 0===n[a]||n[a]!==o)&&(n[a]=o,function(n,i){e[i]=n[i],n[i]=function(){var o=e[i].apply(n,arguments),a=n["".concat(i).concat(t)];return"function"==typeof a&&a(),o}}(n,i))},detach:function(n,i){var o="".concat(i).concat(t);n[i]&&n[o]&&(n[o]=void 0,function(t,n){e[n]&&(delete t[n],t[n]=e[n],delete e[n])}(n,i))}}}.bind(void 0)();var x=function(){!function(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,undefined);var e,t,n,i=function(i){e=i.oldValue,t=i.newValue,n=i.title,w.postMessage({action:"track_location",payload:{pageUrl:i}})},o=function(){var o=window.location.href;t!==o&&(e=t,t=o,n=document.title,i({oldValue:e,newValue:t,title:n}))};return{start:function(){t=window.location.href,i({newValue:t,title:document.title}),L.attach(window.history,"pushState",o),L.attach(window.history,"replaceState",o),window.addEventListener?(window.addEventListener("hashchange",o,!1),window.addEventListener("popstate",o,!1)):(window.attachEvent("hashchange",o,!1),window.attachEvent("popstate",o,!1))},stop:function(){e=t=void 0,L.detach(window.history,"pushState"),L.detach(window.history,"replaceState"),window.removeEventListener?(window.removeEventListener("hashchange",o),window.removeEventListener("popstate",o)):(window.detachEvent("hashchange",o),window.detachEvent("popstate",o))},track:i}}.bind(void 0)();function S(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")}var T=function(){var e=this;S(this,undefined);var t=null,n=null,i=null,o=function(){S(this,e),w.postMessage({action:"track_activity",payload:{seen:n}})}.bind(this),a=function(){S(this,e),n=(new Date).getTime()}.bind(this),s=function(t){S(this,e),p.unbindEvent("keypress",a),p.unbindEvent("mousemove",a),p.unbindEvent("click",a),t&&(p.bindEvent("keypress",a),p.bindEvent("mousemove",a),p.bindEvent("click",a))}.bind(this),r=function(){S(this,e);var a=(new Date).getTime();null===i||null===n||t&&(a<t||n<t||a-t<59e3||n>t&&n<a&&o()),t=a}.bind(this),d=function(){S(this,e),i&&clearInterval(i),i=null,n=null,t=null}.bind(this),c=function(){S(this,e),d(),s(!0),t=(new Date).getTime(),i=setInterval(r,6e4)}.bind(this),u=function(){S(this,e),n=(new Date).getTime(),o(),d(),s(!1)}.bind(this),l=function(){S(this,e),"hidden"===document.visibilityState&&u()}.bind(this);return{start:function(){c(),p.bindEvent("focus",c),p.bindEvent("blur",u),p.bindEvent("beforeunload",u),p.bindEvent("visibilitychange",l)},stop:function(){u(),p.unbindEvent("focus",c),p.unbindEvent("blur",u),p.unbindEvent("beforeunload",u),p.unbindEvent("visibilitychange",l)}}}.bind(void 0)(),A=function(){x.start(),T.start()},O=function(){x.stop(),T.stop()};function M(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")}var P={start:function(){v.isEmpty()||v.isLocked()||(v.toggleLock(!0),this.run())},run:function(){var e=v.deque();e?this.process(e):v.toggleLock(!1)},process:function(e){var t=this;e.handler?b.subscribe(e.action,e.payload,function(n){M(this,t),"function"==typeof e.handler&&e.handler(n),this.run()}.bind(this)):(b.subscribe(e.action,e.payload),setTimeout(function(){M(this,t),this.run()}.bind(this),0))}};var N=function(){return function(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,undefined),{init:function(e){var t=document.createElement("script"),n=p.cdn_url()?p.cdn_url():e.host;t.type="text/javascript",t.src=n+"/js/co-browsing.js",(document.body?document.body:document.getElementsByTagName("head")[0]).appendChild(t),window.fc_cobrowse={host:e.host,locale:e.locale}}}}.bind(void 0)(),B={setCookie:function(e,t,n){var i=n||31536e6,o=new Date(+new Date+i),a=t||"_fw_crm_v";return document.cookie=a+"="+e+";domain=."+location.hostname+";path=/;expires="+o.toUTCString()+";SameSite=Lax;",e},removeCookie:function(e){var t=e||"_fw_crm_v";document.cookie=t+"=;domain=."+location.hostname+";path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;SameSite=Lax;"},getCookie:function(){if(document.cookie){for(var e,t,n,i="freshworks-s360-vid",o={},a=document.cookie.split(";"),s=0,r=a.length;s<r;s++)(e=a[s]&&a[s].split("="))&&e.length&&(o[e[0].trim()]=e[1]);return o[i]?(n=o[i],this.removeCookie(i)):n=o._fw_crm_v,t=n||this.generateUUID(),this.setCookie(t)}},generateUUID:function(){var e=(new Date).getTime(),t=performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(n){var i=16*Math.random();return e>0?(i=(e+i)%16|0,e=Math.floor(e/16)):(i=(t+i)%16|0,t=Math.floor(t/16)),("x"==n?i:7&i|8).toString(16)}))}};function D(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R={onMessageCB:function(){var e;return function(){return e||(e=this.onMessage.bind(this))}}(),onCustomEventCB:function(){var e;return function(){return e||(e=this.onCustomMessage.bind(this))}}(),onVisibilityChangeCB:function(){var e;return function(){return e||(e=this.onVisibilityChange.bind(this))}}(),subscribe:function(){window.addEventListener?(window.addEventListener("message",this.onMessageCB(),!1),window.addEventListener("focus",this.onVisibilityChangeCB(),!1),window.addEventListener("blur",this.onVisibilityChangeCB(),!1)):(window.attachEvent("onmessage",this.onMessageCB()),window.attachEvent("focus",this.onVisibilityChangeCB()),window.attachEvent("blur",this.onVisibilityChangeCB())),this.subscribeSales360Event()},unsubscribe:function(){window.removeEventListener?(window.removeEventListener("message",this.onMessageCB(),!1),window.removeEventListener("focus",this.onVisibilityChangeCB(),!1),window.removeEventListener("blur",this.onVisibilityChangeCB(),!1)):(window.detachEvent("onmessage",this.onMessageCB()),window.detachEvent("focus",this.onVisibilityChangeCB()),window.detachEvent("blur",this.onVisibilityChangeCB())),this.unsubscribeSales360Event()},subscribeSales360Event:function(){window.addEventListener?window.addEventListener("fwcrm_event",this.onCustomEventCB(),!1):window.attachEvent("fwcrm_event",this.onCustomEventCB())},unsubscribeSales360Event:function(){window.removeEventListener?window.removeEventListener("fwcrm_event",this.onCustomEventCB(),!1):window.detachEvent("fwcrm_event",this.onCustomEventCB())},onVisibilityChange:function(e){switch(e.type){case"focus":w.postMessage({action:"widget_focus"});break;case"blur":w.postMessage({action:"widget_blur",payload:{title:document.title,location:window.location.href}}),C.postMessage({action:"widget_location",openWindow:!1,payload:window.location.href})}},onUserCreate:function(e){E.publish("user:created",e)},loadWidget:function(){if(!1===t.isInitialized()){t.initialized(!0);var e=w.getJSON(),n=g.getProperties(),i=g.getConfig(),o=t.getTags(),a=t.getFaqTags();if(e.integrations=g.getIntegrations(),e.campaignRuleIds=g.getcampaignRuleIds(),e.externalId=g.getExternalId(),e.restoreId=g.getRestoreId(),e.flowId=g.getFlowId(),e.flowVersionId=g.getFlowVersionId(),e.previewMode=g.getPreviewMode(),e.identifyByReferenceId=g.getIdentifyByReferenceId(),n&&(e.properties=n),i&&(e.config=i),o&&(e.tags=o),a&&(e.faqTags=a),e.userAgent=p.getAgent,p.storageAvailable){var s=e.token,r=localStorage.getItem(s),d=e.siteId?"".concat(e.token,"_").concat(e.siteId):null,c=d?localStorage.getItem(d):null;if((r||d&&c)&&(e.storage={},e.storage[s]=r||JSON.stringify({}),d&&(e.storage[d]=c||JSON.stringify({}))),i&&i.overrideDS){var u="lsds_".concat(d||s),l=localStorage.getItem(u);l?e.lsds=F({},u,l):(e.lsds=F({},u,JSON.stringify({})),e.migrateLFDS=!0)}}w.setFrameSize(),w.setWidgetDisplayStyle(),w.postMessage({action:"load_widget",payload:e})}},unloadWidget:function(){C.isLoaded()&&C.unload(),t.reset(),g.reset(),O(),w.reset(),w.remove(e.frameDivId),this.unsubscribe(),E.publish("widget:destroyed",null,!0),E.clear()},updateFrameSettings:function(e){if(null!==w.getSettings()||void 0===e)return!1;w.setSettings(e)},onCustomMessage:function(e){},onMessage:function(n){var i=this,o=n.origin||n.originalEvent.origin,a=g.getConfig(),s=a&&a.cssNames;if(o===w.getHost()||o===C.getHostOrigin()){var r=n.data,d=r&&r.action;if(this.updateFrameSettings(r.settingsPayload),d){var c=document.getElementById(e.frameDivId),u=s&&s.expanded||"expanded";switch(d){case"push_subscribe_destroy_response":this.unloadWidget();break;case"push_user_meta":E.publish("push:subscribed",r.data),w.postMessage(r);break;case"toggle_dialog":r.data?E.publish("dialog:opened"):E.publish("dialog:closed");break;case"reset_user_cookie":B.removeCookie(),w.postMessage({action:"update_cookie",payload:{omniCookie:B.getCookie()}});break;case"restore_user_cookie":B.removeCookie(),B.setCookie(r.alias),w.postMessage({action:"restore_cookie",payload:{alias:r.alias}});break;case"notify_frame":var l=r.data,f=document.getElementById(e.frameDivId),h=s&&s.open||"fc-open";"expand"===l?(f.removeAttribute("style"),f.classList.add("h-open-notify"),f.classList.add(h),f.classList.add(l)):"close"===l?(f.removeAttribute("style"),f.classList.remove("h-open-notify"),f.classList.remove(h),f.classList.remove("expand")):"mobile-view"===l?f.classList.add("fc-mobile-view"):(f.classList.add("h-open-notify"),f.classList.add(h));break;case"resize_frame":var m=document.getElementsByTagName("BODY")[0],v=s&&s.open||"fc-open";t.opened(r.isOpen),t.isOpened()?(c.classList.add("h-open-container"),c.classList.add(v),c.classList.add("widget-open-animate"),E.publish("widget:opened"),setTimeout(function(){D(this,i),c.classList.remove("widget-open-animate")}.bind(this),1e3),m&&m.classList.add("fc-widget-open")):(c.removeAttribute("style"),c.classList.remove("h-open-container"),c.classList.remove(v),E.publish("widget:closed"),m&&m.classList.remove("fc-widget-open"));break;case"toggle_frame":r.show?c.classList.remove("hide"):-1===c.className.trim().indexOf("hide")&&c.classList.add("hide");break;case"push_frame_loaded":C.loaded(!0),C.setSource(n&&n.source),C.postMessage({action:"widget_location",openWindow:!1,payload:window.location.href}),w.postMessage({action:"widget_location",payload:{title:document.title,location:window.location.href}});break;case"frame_state_change":var y=document.getElementById(e.frameDivId),_=r&&r.data,I=_&&_.frameState,L=w.getSettings()&&w.getSettings().enabledFeatures;E.publish("frame:statechange",r),"initialized"===I&&(w.isJWTEnabled()&&w.isJWTStrictMode()&&y.classList.add("fc_dn"),this.loadWidget(),L&&-1!==L.indexOf("COBROWSING")&&N.init({host:w.getHost(),locale:g.getProperties().locale})),"loaded"===I&&w.loaded(!0),"authenticated"!==I&&"not_authenticated"!==I||w.isJWTEnabled()&&w.isJWTStrictMode()&&(r.success?y.classList.remove("fc_dn"):304!==r.status&&this.unloadWidget());break;case"widget_loaded":t.loaded(!0),E.publish("widget:loaded"),C.isLoaded()||C.init({host:r.pushDomain+"?ref="+btoa(window.location.origin),hostOrigin:p.url_domain(r.pushDomain),appLogoPath:r.appLogoPath,locale:r.locale,sales360App:r.sales360App}),t.doOpen()&&w.postMessage({action:"open_chat"}),w.postMessage({action:"widget_location",payload:{title:document.title,location:window.location.href}});break;case"datastore_loaded":w.postMessage({action:"load_rules"});break;case"rules_loaded":A(),P.start();break;case"enlarge_image":k.create(r.picUrl);break;case"expand_all":document.getElementById(e.frameDivId).classList.add("expanded-modal"),document.getElementById(e.frameDivId).classList.add(u);break;case"expand_article_view":document.getElementById(e.frameDivId).classList.add("expanded-article_view"),document.getElementById(e.frameDivId).classList.remove("collapsed-article_view");break;case"collapse_article_view":document.getElementById(e.frameDivId).classList.remove("expanded-article_view"),document.getElementById(e.frameDivId).classList.add("collapsed-article_view");break;case"collapse_all_article_view":document.getElementById(e.frameDivId).classList.remove("expanded-article_view"),document.getElementById(e.frameDivId).classList.remove("collapsed-article_view");break;case"set_bubble_height":document.getElementById(e.frameDivId).style.height=r.height+"px";break;case"collapse_all":document.getElementById(e.frameDivId).classList.remove("expanded-modal"),document.getElementById(e.frameDivId).classList.remove(u),document.getElementById(e.frameDivId).classList.add("avoid-jitter"),setTimeout(function(){D(this,i),document.getElementById(e.frameDivId).classList.remove("avoid-jitter")}.bind(this),300);break;case"user_state_change":E.publish("user:statechange",r);break;case"user_authenticated":E.publish("user:authenticated",r);break;case"user_created":var x=r.data;if(t.isLoaded())x&&g.setRestoreId(x.restoreId),this.onUserCreate(r);else if(r.success){var S=x&&x.externalId,T=x&&x.restoreId,O=g.getExternalId();O?O===S&&(g.setRestoreId(T),this.onUserCreate(r)):this.onUserCreate(r)}else this.onUserCreate(r);break;case"user_cleared":E.publish("user:cleared"),C.postMessage({action:"clear:subscription",openWindow:!1}),g.reset();break;case"message_sent":E.publish("message:sent",r);break;case"message_received":E.publish("message:received",r);break;case"read_receipts_update":E.publish("readReceipts:update",r);break;case"csat_updated":E.publish("csat:updated",r);break;case"csat_received":E.publish("csat:received",r);break;case"anchor_link_clicked":E.publish("anchorLink:clicked",r);break;case"faq_clicked":E.publish("faq:clicked",r);break;case"download_file":E.publish("download:file",r);break;case"ask_permission":C.postMessage({action:"ask:permission",openWindow:!0});break;case"clear_subscription":C.postMessage({action:"clear:subscription",openWindow:!1});break;case"unread_count_notify":E.publish("unreadCount:notify",r.data);break;case"message_from_agent":E.publish("message:received",r.data);break;case"message_from_user":E.publish("message:sent",r.data);break;case"set_storage_item":if(p.storageAvailable){var M=r.data;M&&M.key&&M.value&&localStorage.setItem(M.key,JSON.stringify(M.value))}break;case"remove_storage_item":if(p.storageAvailable){var F=r.data;F&&F.key&&localStorage.removeItem(F.key)}break;case"startScreenShare":window.fc_cobrowse&&window.fc_cobrowse.allowScreenShare(n);break;case"set_lsds_item":if(p.storageAvailable){var R=r.data,V=R&&R.key;if(V){var W=R&&R.value;localStorage.setItem(V,p.stringifyJSON(W))}}break;case"get_lsds_item":if(p.storageAvailable){var J=r.data,U=J&&J.key;U&&localStorage.getItem(U)}break;case"remove_lsds_item":if(p.storageAvailable){var q=r.data,j=q&&q.key;j&&localStorage.removeItem(j)}break;case"requestForAudioCall":window.fc_cobrowse&&window.fc_cobrowse.requestForAudioCall(n);break;case"rts_connected":E.publish("rts:connected",r.data);break;case"rts_disconnected":E.publish("rts:disconnected",r.data);break;case"stack_max_height":var z=screen.height<=568?screen.height:screen.height-250;document.getElementById(e.frameDivId).style.maxHeight=z+"px",w.postMessage({action:"stacked_max_height",payload:{height:z}});break;default:b.publish(d,r)}}}},syncResponse:function(e,t){var n=e&&e.status;n?w.dispatch(t,{success:200===n,status:n}):w.dispatch(t,{success:!1,status:400})}},V={track:function(e,t){b.subscribe("track_event",{eventName:e,data:t})}};function W(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")}var J=function(){W(this,undefined);return{init:function(n){var i,o,a,s,r=-1!==["Chrome","Firefox","Safari","Edge","Trident","WebView"].indexOf(p.getAgent.name),d=-1!==["Station"].indexOf(p.getAgent.appName);if(r&&!d&&!this.isInitialized()){var c=n&&n.token;c&&c.toUpperCase()!==e.SAMPLE_TOKEN&&(window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),n.referrer=btoa(window.location.origin),void 0===n.open&&(n.open=!1),s=n,t.reset(),g.reset(),O(),R.unsubscribe(),w.init({host:s.host.trim(),token:s.token.trim(),referrer:s.referrer,siteId:s.siteId,flowId:s.flowId,flowVersionId:s.flowVersionId,campaignRuleIds:s.campaignRuleIds,previewMode:s.previewMode,jwtAuthToken:s.jwtAuthToken,cspNonce:s.cspNonce,omniCookie:B.getCookie()||s.omniCookie}),t.openOnLoad(s.open),s.identifyByReferenceId&&g.setIdentifyByReferenceId(!0),s.flowId&&g.setFlowId(s.flowId),s.integrations&&g.setIntegrations(s.integrations),s.campaignRuleIds&&g.setcampaignRuleIds(s.campaignRuleIds),s.flowVersionId&&g.setFlowVersionId(s.flowVersionId),s.previewMode&&g.setPreviewMode(s.previewMode),s.externalId&&(g.setExternalId(s.externalId),g.setRestoreId(s.restoreId)),s.tags&&s.tags.length&&t.setTags(s.tags),s.faqTags&&t.setFaqTags(s.faqTags),g.setProperties({firstName:s.firstName,lastName:s.lastName,email:s.email,phone:s.phone,phoneCountry:s.phoneCountryCode,locale:s.locale,meta:s.meta}),g.setConfig(s.config),s.onLoad&&E.subscribe("widget:loaded",s.onLoad),w.add(),R.subscribe(),i=document,o=i.createElement("link"),a=p.cdn_url()?p.cdn_url():w.getHost(),o.href=a+"/css/widget.css?t="+(new Date).getTime(),o.rel="stylesheet",i.getElementsByTagName("head")[0].appendChild(o))}},destroy:function(){C.unload(),w.unload()},isOpen:function(){return t.isOpened()},isInitialized:function(){return!!w.getToken()},isLoaded:function(){return t.isLoaded()},on:function(e,t){E.subscribe(e,t)},off:function(e,t){E.unsubscribe(e,t)},open:function(e){e?b.subscribe("open_channel",e):b.subscribe("open_chat")},close:function(){b.subscribe("close_chat")},show:function(){b.subscribe("show_chat")},hide:function(){b.subscribe("hide_chat")},setTags:function(e){t.isLoaded()&&(e&&e.length?t.setTags(e):t.setTags([]),b.subscribe("set_tags",{tags:t.getTags(),force:!0}))},setFaqTags:function(e){t.isLoaded()&&(e?t.setFaqTags(e):t.setFaqTags({}),b.subscribe("set_faq_tags",{faqTags:t.getFaqTags(),force:!0}))},setExternalId:function(e,t){var n={};if(e){if("string"==typeof e?n.externalId=e:n=e,!(void 0===window.Promise||t&&"function"==typeof t))return y("set_external_id",n);_("set_external_id",n,t)}},setConfig:function(t){var n=document.getElementById(e.frameDivId);n&&t&&(void 0!==t.fullscreen&&(n.classList.remove(e.classes.fullscreenClass),!0===t.fullscreen&&n.classList.add(e.classes.fullscreenClass)),t.headerProperty&&(void 0!==t.headerProperty.direction&&(n.classList.remove("fc_l2r"),"ltr"===t.headerProperty.direction&&n.classList.add("fc_l2r")),void 0!==t.headerProperty.hideChatButton&&(n.classList.remove("fc_dn"),t.headerProperty.hideChatButton&&n.classList.add("fc_dn")))),b.subscribe("set_custom_config",t)},user:{get:function(e){if(!(void 0===window.Promise||e&&"function"==typeof e))return y("get_user");_("get_user",e)},isExists:function(e){if(!(void 0===window.Promise||e&&"function"==typeof e))return y("user_exists");_("user_exists",e)},update:function(e,t){if(e.jwtAuthToken?w.setJWTAuthToken(e.jwtAuthToken):(e.firstName&&g.setFirstName(e.firstName),e.lastName&&g.setLastName(e.lastName),e.email&&g.setEmail(e.email),e.phone&&g.setPhone(e.phone),e.phoneCountry&&g.setPhoneCountry(e.phoneCountry),e.meta&&g.setUserMeta(e.meta)),!(void 0===window.Promise||t&&"function"==typeof t))return y("update_user",e);_("update_user",e,t)},setProperties:function(e,t){var n={};if(e.jwtAuthToken?(w.setJWTAuthToken(e.jwtAuthToken),n=e):(e.firstName&&(n.firstName=e.firstName,delete e.firstName),e.lastName&&(n.lastName=e.lastName,delete e.lastName),e.email&&(n.email=e.email,delete e.email),e.phone&&(n.phone=e.phone,delete e.phone),e.phoneCountryCode&&(n.phoneCountry=e.phoneCountryCode,delete e.phoneCountryCode),e.locale&&(n.locale=e.locale,delete e.locale),n.meta=e,g.setProperties(n)),!(void 0===window.Promise||t&&"function"==typeof t))return y("set_user_properties",n);_("set_user_properties",n,t)},setFirstName:function(e,t){var n={};if(e){if("string"==typeof e?n.firstName=e:n=e,!t)return this.setProperties(n);this.setProperties(n,t)}},setLastName:function(e,t){var n={};if(e){if("string"==typeof e?n.lastName=e:n=e,!t)return this.setProperties(n);this.setProperties(n,t)}},setEmail:function(e,t){var n={};if(e){if("string"==typeof e?n.email=e:n=e,!t)return this.setProperties(n);this.setProperties(n,t)}},setPhone:function(e,t){var n={};if(e){if("string"==typeof e?n.phone=e:n=e,!t)return this.setProperties(n);this.setProperties(n,t)}},setPhoneCountryCode:function(e,t){var n={};if(e){if("string"==typeof e?n.phoneCountryCode=e:n=e,!t)return this.setProperties(n);this.setProperties(n,t)}},setMeta:function(e,t){if(!t)return this.setProperties(e);this.setProperties(e,t)},setLocale:function(e,t){var n={};if(e){if("string"==typeof e?n.locale=e:n=e,!t)return this.setProperties(n);this.setProperties(n,t)}},clear:function(e){if(!(void 0===window.Promise||e&&"function"==typeof e))return y("reset_user");_("reset_user",e)},create:function(e,t){if("function"==typeof e&&(t=e,e=null),!(void 0===window.Promise||t&&"function"==typeof t))return y("create_user",e);_("create_user",e,t)},clone:function(e,t){if("function"==typeof e&&(t=e,e=null),!(void 0===window.Promise||t&&"function"==typeof t))return y("clone_user",e);_("clone_user",e,t)},getUUID:function(e){if(!(void 0===window.Promise||e&&"function"==typeof e))return y("get_user_uuid");_("get_user_uuid",e)},generateUUID:function(e){if(!(void 0===window.Promise||e&&"function"==typeof e))return y("generate_user_uuid");_("generate_user_uuid",e)}},track:V.track,trackPage:function(e,t){x.track({newValue:e,title:t,force:!0})},authenticate:function(e){var t=this;if(w.isJWTEnabled()){var n=function(){W(this,t),w.setJWTAuthToken(e),w.postMessage({action:"authenticate_user",payload:e})}.bind(this),i=function(i){W(this,t),i&&200===i.status?this.user.update({jwtAuthToken:e}):n()}.bind(this);this.isLoaded()?void 0===window.Promise?this.user.get(i):this.user.get().then(i,i):n()}}}}.bind(void 0)();if(window.fcWidget||(window.fcWidget=J),window.fcSettings)if("complete"===document.readyState){var U=window.fcSettings.onInit;U&&"function"==typeof U&&U(),J.init(window.fcSettings)}else document.onreadystatechange=function(e){return function(){if("complete"===document.readyState){var t=window.fcSettings.onInit;t&&"function"==typeof t&&t(),e.init(window.fcSettings)}}}(J)}()}();